<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>종합 산업안전·근로감독 시스템</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
            min-height: 100vh;
            padding: 1rem;
        }
        .container {
            max-width: 1280px;
            margin: 0 auto;
        }
        .card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            border: 1px solid #BFDBFE;
        }
        .header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        .header-icon {
            background: #BFDBFE;
            padding: 0.5rem;
            border-radius: 0.75rem;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        h1 {
            font-size: 1.875rem;
            font-weight: bold;
            color: #475569;
        }
        .search-container {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .search-wrapper {
            position: relative;
            flex: 1;
        }
        input, select {
            width: 100%;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            background: #F8FAFC;
            border: 1px solid #CBD5E1;
            border-radius: 0.75rem;
            font-size: 1rem;
        }
        select {
            padding-left: 1rem;
            min-width: 200px;
        }
        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            color: #94A3B8;
        }
        button {
            padding: 0.75rem 1rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1rem;
        }
        .btn-primary {
            background: #CBD5E1;
            color: #475569;
            width: 100%;
        }
        .btn-primary:hover {
            background: #94A3B8;
        }
        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .btn-action {
            background: #CBD5E1;
            color: #475569;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-action:hover {
            background: #94A3B8;
        }
        .empty-state {
            text-align: center;
            padding: 4rem 1rem;
            background: #F1F5F9;
            border-radius: 0.75rem;
        }
        .empty-icon {
            width: 80px;
            height: 80px;
            background: #CBD5E1;
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .business-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #CBD5E1;
            margin-bottom: 1rem;
        }
        .business-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .business-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #1E293B;
        }
        .badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            margin-left: 0.5rem;
        }
        .badge-industry {
            background: #CBD5E1;
            color: #475569;
        }
        .badge-employees {
            background: #94A3B8;
            color: #475569;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1rem;
        }
        .info-item {
            background: #F1F5F9;
            padding: 0.75rem;
            border-radius: 0.5rem;
        }
        .info-label {
            font-size: 0.875rem;
            color: #64748B;
            font-weight: 500;
        }
        .info-value {
            color: #475569;
            margin-top: 0.25rem;
        }
        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .report-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #1E293B;
        }
        .report-actions {
            display: flex;
            gap: 0.5rem;
        }
        .section {
            background: #F1F5F9;
            padding: 1rem;
            border-radius: 0.75rem;
            border: 1px solid #CBD5E1;
            margin-bottom: 1rem;
        }
        .section-title {
            font-weight: 600;
            color: #475569;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .supervision-item {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.8);
            border-left: 4px solid #64748B;
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
        }
        .supervision-item.priority-high {
            border-left-color: #64748B;
        }
        .supervision-item.priority-mid {
            border-left-color: #94A3B8;
        }
        .supervision-item.priority-low {
            border-left-color: #CBD5E1;
        }
        .priority-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: bold;
            margin-right: 0.5rem;
        }
        .priority-high {
            background: #94A3B8;
            color: #1E293B;
        }
        .priority-mid {
            background: #CBD5E1;
            color: #475569;
        }
        .priority-low {
            background: #F1F5F9;
            color: #64748B;
        }
        .category-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: #CBD5E1;
            color: #475569;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            margin-right: 0.5rem;
        }
        .item-title {
            font-weight: 500;
            color: #1E293B;
            margin: 0.5rem 0;
        }
        .item-detail {
            font-size: 0.875rem;
            color: #64748B;
            line-height: 1.5;
        }
        .hidden {
            display: none;
        }
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background: white;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card no-print">
            <div class="header">
                <div class="header-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#2563EB" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <h1>종합 산업안전·근로감독 시스템</h1>
            </div>
            
            <div class="search-container">
                <div class="search-wrapper">
                    <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" id="searchInput" placeholder="사업장명, 등록번호, 사업주명으로 검색하세요...">
                </div>
                <select id="jurisdictionSelect">
                    <option value="">전체 관할지청</option>
                    <option value="안산지방고용노동청">안산지방고용노동청</option>
                    <option value="서울남부지방고용노동청">서울남부지방고용노동청</option>
                    <option value="부산지방고용노동청">부산지방고용노동청</option>
                    <option value="서울동부지방고용노동청">서울동부지방고용노동청</option>
                </select>
            </div>

            <div id="searchResults"></div>
            <div id="emptyState" class="empty-state">
                <div class="empty-icon">
                    <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="2">
                        <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    </svg>
                </div>
                <h3 style="font-size: 1.5rem; font-weight: 600; color: #475569; margin-bottom: 0.75rem;">
                    산업안전감독 전용 시스템
                </h3>
                <p style="color: #64748B; max-width: 500px; margin: 0 auto;">
                    모든 업종의 사업장을 검색하여 산업재해 예방 중심의 감독착안사항을 자동 생성합니다.
                </p>
            </div>
        </div>

        <div id="reportContainer" class="card hidden">
            <div class="report-header no-print">
                <div class="report-title" id="reportTitle"></div>
                <div class="report-actions">
                    <button class="btn-action" onclick="window.print()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="6 9 6 2 18 2 18 9"/>
                            <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/>
                            <rect x="6" y="14" width="12" height="8"/>
                        </svg>
                        인쇄
                    </button>
                    <button class="btn-action" onclick="window.print()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                        PDF저장
                    </button>
                </div>
            </div>
            <div id="reportContent"></div>
        </div>
    </div>

    <script>
        const businesses = [
            {
                id: 1,
                name: '(주)대한제조',
                registrationNumber: '123-45-67890',
                ownerName: '김대한',
                ownerContact: '010-1234-5678',
                contact: '02-1234-5678',
                jurisdiction: '안산지방고용노동청',
                industry: '플라스틱제품 제조업',
                location: '경기도 안산시 단원구 공단로 123',
                employees: 85,
                industryCategory: 'manufacturing'
            },
            {
                id: 2,
                name: '삼성건설(주)',
                registrationNumber: '234-56-78901',
                ownerName: '이건설',
                ownerContact: '010-2345-6789',
                contact: '02-2345-6789',
                jurisdiction: '서울남부지방고용노동청',
                industry: '종합건설업',
                location: '서울특별시 서초구 서초대로 74길 11',
                employees: 247,
                industryCategory: 'construction'
            },
            {
                id: 3,
                name: '(주)케미칼코리아',
                registrationNumber: '345-67-89012',
                ownerName: '박화학',
                ownerContact: '010-3456-7890',
                contact: '051-3456-7890',
                jurisdiction: '부산지방고용노동청',
                industry: '기초화학물질 제조업',
                location: '부산광역시 사상구 주례로 47',
                employees: 156,
                industryCategory: 'chemical'
            },
            {
                id: 4,
                name: '행복마트',
                registrationNumber: '456-78-90123',
                ownerName: '정상점',
                ownerContact: '010-4567-8901',
                contact: '02-4567-8901',
                jurisdiction: '서울동부지방고용노동청',
                industry: '종합소매업',
                location: '서울특별시 송파구 올림픽로 300',
                employees: 45,
                industryCategory: 'retail'
            }
        ];

        function generateSupervisionPoints(business) {
            const points = [];
            
            if (business.industryCategory === 'manufacturing') {
                points.push({
                    category: '기계안전',
                    priority: '상',
                    item: '위험기계·기구 방호장치 설치 및 작동상태 점검',
                    detail: '프레스, 전단기, 연삭기 등 방호장치 설치·작동상태, 비상정지장치 기능점검, 안전작업절차 준수여부'
                });
                points.push({
                    category: '밀폐공간안전',
                    priority: '상',
                    item: '밀폐공간 작업 시 질식재해 예방조치 이행실태',
                    detail: '출입 전 산소농도·유해가스 측정, 환기설비 가동, 감시인 배치, 구조·응급처치 장비 비치상태'
                });
            }

            if (business.industryCategory === 'construction') {
                points.push({
                    category: '추락방지',
                    priority: '상',
                    item: '고소작업장 추락방지시설 설치 및 개인보호구 착용실태',
                    detail: '작업발판, 안전난간, 추락방지망 설치상태, 안전대 착용 및 고리걸이 설치, 개구부 덮개 설치여부'
                });
                points.push({
                    category: '중장비안전',
                    priority: '상',
                    item: '이동식크레인 등 건설기계 안전장치 및 운전자격 점검',
                    detail: '과부하방지장치, 모멘트리미터 등 안전장치 작동상태, 운전자 자격증명 및 신호수 배치'
                });
            }

            if (business.industryCategory === 'chemical') {
                points.push({
                    category: '화학사고예방',
                    priority: '상',
                    item: '화학물질 누출·폭발 예방을 위한 안전관리체계 점검',
                    detail: '공정안전보고서 작성·이행상태, MSDS 게시·교육, 누출감지장치 및 방재시설 점검'
                });
                points.push({
                    category: '위험물저장',
                    priority: '상',
                    item: '유독물질 저장·취급 허가사항 및 안전기준 준수여부',
                    detail: '저장시설 구조·설비기준 적합성, 허가량 대비 저장량 확인, 응급처치 약품 비치상태'
                });
            }

            points.push({
                category: '안전보건교육',
                priority: '중',
                item: '법정 안전보건교육 실시현황 및 교육내용 적정성 점검',
                detail: '신규채용자, 작업내용 변경자, 정기교육 실시여부, 교육시간 준수, 교육대장 비치현황'
            });

            points.push({
                category: '작업환경관리',
                priority: '중',
                item: '작업환경측정 실시 및 결과에 따른 개선조치 이행상태',
                detail: '측정대상 작업장 파악, 측정주기 준수여부, 측정결과 근로자 통보, 노출기준 초과 시 개선조치'
            });

            points.push({
                category: '개인보호구',
                priority: '하',
                item: '개인보호구 지급·착용 관리 및 성능유지 상태',
                detail: '작업별 적정 보호구 지급여부, 근로자 착용실태, 보호구 성능검사 및 교체주기 관리'
            });

            points.push({
                category: '안전점검',
                priority: '하',
                item: '일상점검 및 정기점검 실시 현황과 점검표 작성·보관',
                detail: '작업 전 일상점검 실시, 정기점검 계획 수립·이행, 점검결과에 따른 조치사항 기록'
            });

            if (business.industryCategory === 'retail') {
                points.push({
                    category: '고객안전',
                    priority: '하',
                    item: '고객 이용구역 안전관리 및 사고예방 조치상태',
                    detail: '진열대 고정상태, 통로 확보 및 바닥 미끄럼 방지조치, 계단 안전손잡이 설치'
                });
            }

            return points;
        }

        function renderBusinessCard(business) {
            return `
                <div class="business-card">
                    <div class="business-header">
                        <div>
                            <span class="business-title">${business.name}</span>
                            <span class="badge badge-industry">${business.industry}</span>
                            <span class="badge badge-employees">${business.employees}명</span>
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="info-item">
                            <div class="info-label">등록번호</div>
                            <div class="info-value">${business.registrationNumber}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">사업주</div>
                            <div class="info-value">${business.ownerName}</div>
                            <div style="font-size: 0.75rem; color: #64748B;">${business.ownerContact}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">사업장 연락처</div>
                            <div class="info-value">${business.contact}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">관할지청</div>
                            <div class="info-value" style="font-size: 0.75rem;">${business.jurisdiction}</div>
                        </div>
                        <div class="info-item">
                            <div class="info-label">소재지</div>
                            <div class="info-value">${business.location}</div>
                        </div>
                    </div>
                    <button class="btn-primary" onclick="generateReport(${business.id})">
                        산업안전 감독착안사항 생성
                    </button>
                </div>
            `;
        }

        function renderSupervisionPoints(points) {
            const sorted = points.sort((a, b) => {
                const order = { '상': 1, '중': 2, '하': 3 };
                return order[a.priority] - order[b.priority];
            });

            return sorted.map(point => `
                <div class="supervision-item priority-${point.priority === '상' ? 'high' : point.priority === '중' ? 'mid' : 'low'}">
                    <div style="display: flex; align-items: start; gap: 0.75rem;">
                        <span class="priority-badge priority-${point.priority === '상' ? 'high' : point.priority === '중' ? 'mid' : 'low'}">
                            ${point.priority}
                        </span>
                        <span class="category-badge">${point.category}</span>
                        <div style="flex: 1;">
                            <div class="item-title">${point.item}</div>
                            <div class="item-detail">${point.detail}</div>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function filterBusinesses() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const jurisdiction = document.getElementById('jurisdictionSelect').value;

            const filtered = businesses.filter(b => {
                const matchesSearch = !searchTerm || 
                    b.name.toLowerCase().includes(searchTerm) ||
                    b.registrationNumber.includes(searchTerm) ||
                    b.ownerName.toLowerCase().includes(searchTerm);
                
                const matchesJurisdiction = !jurisdiction || b.jurisdiction === jurisdiction;
                
                return matchesSearch && matchesJurisdiction;
            });

            const resultsContainer = document.getElementById('searchResults');
            const emptyState = document.getElementById('emptyState');

            if ((searchTerm || jurisdiction) && filtered.length > 0) {
                resultsContainer.innerHTML = filtered.map(renderBusinessCard).join('');
                resultsContainer.style.display = 'block';
                emptyState.style.display = 'none';
            } else if (searchTerm || jurisdiction) {
                resultsContainer.innerHTML = '<div style="text-align: center; padding: 2rem; color: #64748B;">검색 결과가 없습니다.</div>';
                resultsContainer.style.display = 'block';
                emptyState.style.display = 'none';
            } else {
                resultsContainer.style.display = 'none';
                emptyState.style.display = 'block';
            }
        }

        function generateReport(businessId) {
            const business = businesses.find(b => b.id === businessId);
            if (!business) return;

            const points = generateSupervisionPoints(business);
            
            document.getElementById('reportTitle').textContent = `${business.name} 산업안전 감독착안사항 보고서`;
            document.getElementById('reportContent').innerHTML = `
                <div class="section">
                    <div class="section-title">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                        </svg>
                        산업안전 감독착안사항 (${points.length}개 항목)
                    </div>
                    ${renderSupervisionPoints(points)}
                    <div style="margin-top: 1rem; display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; text-align: center;">
                        <div style="background: #CBD5E1; padding: 0.75rem; border-radius: 0.5rem;">
                            <div style="font-size: 1.25rem; font-weight: bold; color: #1E293B;">
                                ${points.filter(p => p.priority === '상').length}개
                            </div>
                            <div style="color: #64748B;">상급 우선순위</div>
                        </div>
                        <div style="background: #94A3B8; padding: 0.75rem; border-radius: 0.5rem;">
                            <div style="font-size: 1.25rem; font-weight: bold; color: #1E293B;">
                                ${points.filter(p => p.priority === '중').length}개
                            </div>
                            <div style="color: #64748B;">중급 우선순위</div>
                        </div>
                        <div style="background: #F1F5F9; padding: 0.75rem; border-radius: 0.5rem;">
                            <div style="font-size: 1.25rem; font-weight: bold; color: #475569;">
                                ${points.filter(p => p.priority === '하').length}개
                            </div>
                            <div style="color: #64748B;">하급 우선순위</div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('reportContainer').classList.remove('hidden');
            document.getElementById('reportContainer').scrollIntoView({ behavior: 'smooth' });
        }

        document.getElementById('searchInput').addEventListener('input', filterBusinesses);
        document.getElementById('jurisdictionSelect').addEventListener('change', filterBusinesses);
    </script>
</body>
</html>
